import{b2 as h,d as g,S as v,U as S,_ as k,I,aj as N,f as x,i as D,u as e,c as F,k as m,a as O,o as T,n as p,b3 as U,b4 as B,b5 as J,b6 as V,af as d,b0 as i}from"./index-ede2aed2.js";import{u as P}from"./usePageTitle-649cd0a6.js";class j extends h{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const M=g({__name:"FlowRunCreate",setup(f){const t=v(),n=S("deploymentId"),s=k(),y=I("parameters",j,void 0),{deployment:o}=N(n),_=async r=>{var u,a;try{const l=await t.deployments.createDeploymentFlowRun(n.value,r),c=((a=(u=r.state)==null?void 0:u.stateDetails)==null?void 0:a.scheduledTime)??void 0,C=!c,b=J(V,{flowRun:l,flowRunRoute:d.flowRun,router:s,immediate:C,startTime:c});i(b,"success"),s.push(d.deployment(n.value))}catch(l){i("Something went wrong trying to create a flow run","error"),console.error(l)}},w=()=>{s.back()},R=x(()=>o.value?`Create Flow Run for Deployment: ${o.value.name}`:"Create Flow Run for Deployment");return P(R),(r,u)=>{const a=D("p-layout-default");return e(o)?(T(),F(a,{key:0},{header:m(()=>[p(e(U),{deployment:e(o)},null,8,["deployment"])]),default:m(()=>[p(e(B),{deployment:e(o),parameters:e(y),onSubmit:_,onCancel:w},null,8,["deployment","parameters"])]),_:1})):O("",!0)}}});export{M as default};
